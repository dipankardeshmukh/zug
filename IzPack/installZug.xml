<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>

<!-- 
    A sample installation file.
    Use it as a base for your own installers :-)
    
    To compile it :
    - go in the bin directory where you installed IzPack
    - call "compile ../sample/install.xml -b ../sample"
-->

<installation version="1.0">

    <!-- 
        The info section.
        The meaning of the tags should be natural ...
    -->
    <info>
        <appname>Automature-ZUG</appname>
        <appversion>7.2.0</appversion>
        <authors>
            <author name="Automature LLC" email="info@automature.com"/>
        </authors>
        <url>http://www.automature.com/</url>
    </info>

    <!-- 
        The gui preferences indication.
        Sets the installer window to 640x480. It will not be able to change the size.
    -->
    <guiprefs width="640" height="480" resizable="yes"/>

    <!-- 
        The locale section.
        Asks here to include the English and French langpacks.
    -->
    <locale>
        <langpack iso3="eng"/>
    </locale>
    
<conditions>
<condition type="exists" id="win32" condition="izpack.windowsinstall">
    <file>${ENV[programfiles(x86)]}</file>
</condition>
<condition type="not" id="win64" condition="izpack.windowsinstall">
    <condition type="ref" refid="win32" />
</condition>
</conditions>
    
    
    <variables> 
      <variable name="TargetPanel.dir.windows" value="${ENV[programfiles(x86)]}${FILE_SEPARATOR}automature" condition="win32"/>
    <variable name="TargetPanel.dir.windows" value="${ENV[programfiles]}${FILE_SEPARATOR}automature" condition="win64"/>
      <variable name="TargetPanel.dir.unix" value="/usr/lib/automature" condition="izpack.linuxinstall"/>
      <variable name="TargetPanel.dir.mac" value="/Applications/Automature" condition="izpack.macinstall"/>
      <variable name="default.downloadLoc" value="${ENV[APPDATA]}${FILE_SEPARATOR}Automature${FILE_SEPARATOR}ZUG" condition="izpack.windowsinstall"/>
      <variable name="default.downloadLoc" value="/usr/share/automature/ZUG" condition="izpack.linuxinstall"/>
      <variable name="default.downloadLoc" value="/Applications/Automature/ZUG" condition="izpack.macinstall"/>
    </variables>
  
    <variables>
        <variable name="INSTALL_PATH" checkonce="true" condition="izpack.linuxinstall" value="$TargetPanel.dir.unix"/>
        <variable name="INSTALL_PATH" checkonce="true" condition="installonwindows64" value="$TargetPanel.dir.windows"/>
        <variable name="INSTALL_PATH" checkonce="true" condition="installonwindows32" value="$TargetPanel.dir.windows"/>
        <variable name="INSTALL_PATH" checkonce="true" condition="izpack.macinstall" value="$TargetPanel.dir.mac"/>
    </variables>

<!--
     
<conditions>
   <condition type="variable" id="win32">
      <name>dir.win32</name>
      <value>C:\Program Files\Automature</value>
   </condition>
   <condition type="variable" id="win64">
      <name>dir.win64</name>
      <value>expert</value>
   </condition>
   <condition type="java" id="installonwindows">
             <java>
                     <class>com.izforge.izpack.util.OsVersion</class>
                     <field>IS_WINDOWS</field>
             </java>
             <returnvalue type="boolean">true</returnvalue>
       </condition>
       <condition type="and" id="standardinstallation.onwindows">
             <condition type="ref" refid="standardinstallation"/>
             <condition type="ref" refid="installonwindows" />
       </condition>
</conditions>

<conditions>
<condition type="exists" id="upgrade">
    <file>${INSTALL_PATH}${FILE_SEPARATOR}automature-zug.jar</file>
</condition>

<condition type="not" id="install">
    <condition type="ref" refid="upgrade" />
</condition>

</conditions>
-->
    <!-- 
        The resources section.
        The ids must be these ones if you want to use the LicencePanel and/or the InfoPanel.
    -->
    <resources>  
        <res id="LicencePanel.licence" src="Licence.txt"/>
        <res id="InfoPanel.info" src="Readme.txt"/>
    </resources>
    
<!--  
<dynamicinstallerrequirements>
  <installerrequirement severity="ERROR"
                        condition="izpack.linuxinstall"
                        messageid="Windows machine :  ${upgrade} :"/>
</dynamicinstallerrequirements>
-->  
    <!-- 
        The panels section.
        We indicate here which panels we want to use. The order will be respected.
    -->
    <panels>
        <panel classname="HelloPanel"/>
        <panel classname="InfoPanel"/>
        <panel classname="LicencePanel"/>  
        <panel classname="TargetPanel"/>
        <panel classname="PacksPanel"/>
        <panel classname="InstallPanel"/>             
        <panel classname="FinishPanel"/>
    </panels>

    <!-- 
        The packs section.
        We specify here our packs.
    -->
    <packs>
        <pack name="ZUG" required="yes">
        <description>Choose this option if this machine is where you will execute your test on</description>         
        
           <file unpack="true" src="automature-zug-bin-7.2.0.zip" targetdir="$INSTALL_PATH" /> 
           
           <executable targetfile="${INSTALL_PATH}${FILE_SEPARATOR}ZUG${FILE_SEPARATOR}SetZugPath.bat" stage="postinstall" keep="true" condition="izpack.windowsinstall">
           </executable>
           <executable targetfile="$INSTALL_PATH${FILE_SEPARATOR}ZUG${FILE_SEPARATOR}InstallZugLinux.sh" stage="postinstall" keep="true" condition="izpack.linuxinstall">
           </executable>
           <executable targetfile="$INSTALL_PATH${FILE_SEPARATOR}ZUG${FILE_SEPARATOR}InstallZugMac.sh" stage="postinstall" keep="true" condition="izpack.macinstall">
           </executable>       
          <!-- <file src="generateXML.jar" targetdir="$INSTALL_PATH" /> -->
          <!-- <file src="create_config.sh" targetdir="$INSTALL_PATH" /> -->
         <!--            
            <executable targetfile="${INSTALL_PATH}${FILE_SEPARATOR}generateXML.jar" type="jar" stage="postinstall" failure="ask" keep="true" condition="install">
              <args>
                <arg value="xml_file_loc=${INSTALL_PATH}${FILE_SEPARATOR}NYON-CLIENT"/>
                <arg value="davos_ip=$IPAddress"/>
                <arg value="davos_port=$Port"/>
                <arg value="davos_username=$DavosUserName"/>
                <arg value="davos_password=$DavosPassword"/>
              </args>
            </executable>
            <executable targetfile="${INSTALL_PATH}${FILE_SEPARATOR}generateXML.jar" type="jar" stage="postinstall" failure="ask" keep="true" condition="install">
              <args>
                <arg value="xml_file_loc=${INSTALL_PATH}${FILE_SEPARATOR}NYON-SERVER"/>
                <arg value="log_loc=$DOWNLOADLoc"/>
                <arg value="download_loc=$DOWNLOADLoc"/>
                <arg value="davos_ip=$IPAddress"/>
                <arg value="davos_port=$Port"/>
                <arg value="davos_username=$DavosUserName"/>
                <arg value="davos_password=$DavosPassword"/>
              </args>
            </executable>
              
            <executable targetfile="$INSTALL_PATH${FILE_SEPARATOR}NYON-SERVER${FILE_SEPARATOR}RegisterAsService.cmd" stage="postinstall" keep="true" condition="izpack.windowsinstall">
              <args>
                <arg value="${INSTALL_PATH}${FILE_SEPARATOR}NYON-SERVER"/>
                <arg value="$DOWNLOADLoc"/>
              </args>
            </executable>
            <executable targetfile="$INSTALL_PATH${FILE_SEPARATOR}create_config.sh" stage="postinstall" keep="true" condition="izpack.linuxinstall">
              <args>
                <arg value="$INSTALL_PATH"/>
                <arg value="$DOWNLOADLoc"/>
                <arg value="$DOWNLOADLoc"/>
              </args>
            </executable> 
          -->         
        </pack>
    </packs>

</installation>
